<?xml version="1.0" encoding="utf-8"?><testsuites name="pytest tests"><testsuite name="pytest" errors="0" failures="11" skipped="0" tests="14" time="8.093" timestamp="2026-01-28T20:25:12.831037+00:00" hostname="agent-env-3d81e11f-0b9d-4f0f-a9b3-9c9ca655d419"><testcase classname="backend.tests.test_employee_commission.TestEmployeeCommissionFeature" name="test_01_setup_test_data" time="0.596"><failure message="AssertionError: Client creation failed: {&quot;detail&quot;:[{&quot;type&quot;:&quot;missing&quot;,&quot;loc&quot;:[&quot;body&quot;,&quot;dp_id&quot;],&quot;msg&quot;:&quot;Field required&quot;,&quot;input&quot;:{&quot;name&quot;:&quot;TEST_Commission_Client_e2da1a&quot;,&quot;email&quot;:&quot;test_commission_b1ff3b@example.com&quot;,&quot;phone&quot;:&quot;9876543210&quot;,&quot;pan_number&quot;:&quot;ABCDEB6B8F&quot;,&quot;address&quot;:&quot;Test Address&quot;,&quot;city&quot;:&quot;Mumbai&quot;,&quot;state&quot;:&quot;Maharashtra&quot;,&quot;pincode&quot;:&quot;400001&quot;,&quot;client_type&quot;:&quot;individual&quot;,&quot;bank_accounts&quot;:[{&quot;bank_name&quot;:&quot;Test Bank&quot;,&quot;account_number&quot;:&quot;1234567890&quot;,&quot;ifsc_code&quot;:&quot;TEST0001234&quot;,&quot;account_holder_name&quot;:&quot;Test Client&quot;}]},&quot;url&quot;:&quot;https://errors.pydantic.dev/2.12/v/missing&quot;}]}&#10;assert 422 == 200&#10; +  where 422 = &lt;Response [422]&gt;.status_code">backend/tests/test_employee_commission.py:85: in test_01_setup_test_data
    assert response.status_code == 200, f"Client creation failed: {response.text}"
E   AssertionError: Client creation failed: {"detail":[{"type":"missing","loc":["body","dp_id"],"msg":"Field required","input":{"name":"TEST_Commission_Client_e2da1a","email":"test_commission_b1ff3b@example.com","phone":"9876543210","pan_number":"ABCDEB6B8F","address":"Test Address","city":"Mumbai","state":"Maharashtra","pincode":"400001","client_type":"individual","bank_accounts":[{"bank_name":"Test Bank","account_number":"1234567890","ifsc_code":"TEST0001234","account_holder_name":"Test Client"}]},"url":"https://errors.pydantic.dev/2.12/v/missing"}]}
E   assert 422 == 200
E    +  where 422 = &lt;Response [422]&gt;.status_code</failure></testcase><testcase classname="backend.tests.test_employee_commission.TestEmployeeCommissionFeature" name="test_02_booking_with_rp_calculates_employee_share" time="0.568"><failure message="AssertionError: Booking creation failed: {&quot;detail&quot;:[{&quot;type&quot;:&quot;string_type&quot;,&quot;loc&quot;:[&quot;body&quot;,&quot;client_id&quot;],&quot;msg&quot;:&quot;Input should be a valid string&quot;,&quot;input&quot;:null,&quot;url&quot;:&quot;https://errors.pydantic.dev/2.12/v/string_type&quot;},{&quot;type&quot;:&quot;string_type&quot;,&quot;loc&quot;:[&quot;body&quot;,&quot;stock_id&quot;],&quot;msg&quot;:&quot;Input should be a valid string&quot;,&quot;input&quot;:null,&quot;url&quot;:&quot;https://errors.pydantic.dev/2.12/v/string_type&quot;}]}&#10;assert 422 == 200&#10; +  where 422 = &lt;Response [422]&gt;.status_code">backend/tests/test_employee_commission.py:166: in test_02_booking_with_rp_calculates_employee_share
    assert response.status_code == 200, f"Booking creation failed: {response.text}"
E   AssertionError: Booking creation failed: {"detail":[{"type":"string_type","loc":["body","client_id"],"msg":"Input should be a valid string","input":null,"url":"https://errors.pydantic.dev/2.12/v/string_type"},{"type":"string_type","loc":["body","stock_id"],"msg":"Input should be a valid string","input":null,"url":"https://errors.pydantic.dev/2.12/v/string_type"}]}
E   assert 422 == 200
E    +  where 422 = &lt;Response [422]&gt;.status_code</failure></testcase><testcase classname="backend.tests.test_employee_commission.TestEmployeeCommissionFeature" name="test_03_booking_without_rp_has_full_employee_share" time="0.557"><failure message="AssertionError: Booking creation failed: {&quot;detail&quot;:[{&quot;type&quot;:&quot;string_type&quot;,&quot;loc&quot;:[&quot;body&quot;,&quot;client_id&quot;],&quot;msg&quot;:&quot;Input should be a valid string&quot;,&quot;input&quot;:null,&quot;url&quot;:&quot;https://errors.pydantic.dev/2.12/v/string_type&quot;},{&quot;type&quot;:&quot;string_type&quot;,&quot;loc&quot;:[&quot;body&quot;,&quot;stock_id&quot;],&quot;msg&quot;:&quot;Input should be a valid string&quot;,&quot;input&quot;:null,&quot;url&quot;:&quot;https://errors.pydantic.dev/2.12/v/string_type&quot;}]}&#10;assert 422 == 200&#10; +  where 422 = &lt;Response [422]&gt;.status_code">backend/tests/test_employee_commission.py:199: in test_03_booking_without_rp_has_full_employee_share
    assert response.status_code == 200, f"Booking creation failed: {response.text}"
E   AssertionError: Booking creation failed: {"detail":[{"type":"string_type","loc":["body","client_id"],"msg":"Input should be a valid string","input":null,"url":"https://errors.pydantic.dev/2.12/v/string_type"},{"type":"string_type","loc":["body","stock_id"],"msg":"Input should be a valid string","input":null,"url":"https://errors.pydantic.dev/2.12/v/string_type"}]}
E   assert 422 == 200
E    +  where 422 = &lt;Response [422]&gt;.status_code</failure></testcase><testcase classname="backend.tests.test_employee_commission.TestEmployeeCommissionFeature" name="test_04_approve_booking" time="0.593"><failure message="AssertionError: Booking approval failed: {&quot;detail&quot;:&quot;Booking not found&quot;}&#10;assert 404 == 200&#10; +  where 404 = &lt;Response [404]&gt;.status_code">backend/tests/test_employee_commission.py:217: in test_04_approve_booking
    assert response.status_code == 200, f"Booking approval failed: {response.text}"
E   AssertionError: Booking approval failed: {"detail":"Booking not found"}
E   assert 404 == 200
E    +  where 404 = &lt;Response [404]&gt;.status_code</failure></testcase><testcase classname="backend.tests.test_employee_commission.TestEmployeeCommissionFeature" name="test_05_client_confirms_booking" time="0.552"><failure message="assert 404 == 200&#10; +  where 404 = &lt;Response [404]&gt;.status_code">backend/tests/test_employee_commission.py:229: in test_05_client_confirms_booking
    assert response.status_code == 200
E   assert 404 == 200
E    +  where 404 = &lt;Response [404]&gt;.status_code</failure></testcase><testcase classname="backend.tests.test_employee_commission.TestEmployeeCommissionFeature" name="test_06_record_payment" time="0.551"><failure message="assert 404 == 200&#10; +  where 404 = &lt;Response [404]&gt;.status_code">backend/tests/test_employee_commission.py:250: in test_06_record_payment
    assert response.status_code == 200
E   assert 404 == 200
E    +  where 404 = &lt;Response [404]&gt;.status_code</failure></testcase><testcase classname="backend.tests.test_employee_commission.TestEmployeeCommissionFeature" name="test_07_confirm_stock_transfer_calculates_commission" time="0.552"><failure message="AssertionError: Stock transfer confirmation failed: {&quot;detail&quot;:&quot;Booking not found&quot;}&#10;assert 404 == 200&#10; +  where 404 = &lt;Response [404]&gt;.status_code">backend/tests/test_employee_commission.py:279: in test_07_confirm_stock_transfer_calculates_commission
    assert response.status_code == 200, f"Stock transfer confirmation failed: {response.text}"
E   AssertionError: Stock transfer confirmation failed: {"detail":"Booking not found"}
E   assert 404 == 200
E    +  where 404 = &lt;Response [404]&gt;.status_code</failure></testcase><testcase classname="backend.tests.test_employee_commission.TestEmployeeCommissionFeature" name="test_08_get_employee_commissions_list" time="0.554"><failure message="AssertionError: Test booking commission should be in the list&#10;assert None is not None">backend/tests/test_employee_commission.py:329: in test_08_get_employee_commissions_list
    assert test_commission is not None, "Test booking commission should be in the list"
E   AssertionError: Test booking commission should be in the list
E   assert None is not None</failure></testcase><testcase classname="backend.tests.test_employee_commission.TestEmployeeCommissionFeature" name="test_09_get_employee_commissions_summary" time="0.576" /><testcase classname="backend.tests.test_employee_commission.TestEmployeeCommissionFeature" name="test_10_mark_commission_as_paid" time="0.541"><failure message="AssertionError: Mark commission paid failed: {&quot;detail&quot;:&quot;Booking not found&quot;}&#10;assert 404 == 200&#10; +  where 404 = &lt;Response [404]&gt;.status_code">backend/tests/test_employee_commission.py:375: in test_10_mark_commission_as_paid
    assert response.status_code == 200, f"Mark commission paid failed: {response.text}"
E   AssertionError: Mark commission paid failed: {"detail":"Booking not found"}
E   assert 404 == 200
E    +  where 404 = &lt;Response [404]&gt;.status_code</failure></testcase><testcase classname="backend.tests.test_employee_commission.TestEmployeeCommissionFeature" name="test_11_commission_summary_reflects_paid_status" time="0.556"><failure message="AssertionError: There should be some paid commissions after marking as paid&#10;assert 0 &gt; 0">backend/tests/test_employee_commission.py:404: in test_11_commission_summary_reflects_paid_status
    assert total_paid &gt; 0, "There should be some paid commissions after marking as paid"
E   AssertionError: There should be some paid commissions after marking as paid
E   assert 0 &gt; 0</failure></testcase><testcase classname="backend.tests.test_employee_commission.TestEmployeeCommissionFeature" name="test_12_non_finance_user_cannot_access_commissions" time="0.589" /><testcase classname="backend.tests.test_employee_commission.TestEmployeeCommissionFeature" name="test_13_filter_commissions_by_status" time="0.595" /><testcase classname="backend.tests.test_employee_commission.TestEmployeeCommissionFeature" name="test_14_rp_share_cap_at_30_percent" time="0.560"><failure message="AssertionError: Should reject RP share &gt; 30%, got 422&#10;assert 422 == 400&#10; +  where 422 = &lt;Response [422]&gt;.status_code">backend/tests/test_employee_commission.py:469: in test_14_rp_share_cap_at_30_percent
    assert response.status_code == 400, f"Should reject RP share &gt; 30%, got {response.status_code}"
E   AssertionError: Should reject RP share &gt; 30%, got 422
E   assert 422 == 400
E    +  where 422 = &lt;Response [422]&gt;.status_code</failure></testcase></testsuite></testsuites>